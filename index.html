<html>
<head><title>
    Stop and ...
</title></head>    
<body>
<div id='nomouse' style='float: right; clear: none;'>Click to drag the nose! Turn on audio to enjoy!</div>
<img id="rose" style="position: absolute; user-drag: none; top: calc(35%); left: calc(40%); width: 30%; height: 30%; image-rendering: pixelated;" src="./rose.png"></img>
<img id="nose" style="position: absolute; user-drag: none; width: 20%; height: 20%; image-rendering: pixelated;" src="./nose.png"></img>

<script>
const synth = window.speechSynthesis;
dragElement = elem => {
    let x0 = 0;
    let y0 = 0;
    let x1 = 0;
    let y1 = 0;

    let utteranceDone = true;

    dragMouseDown = e => {
        e.preventDefault();

        if(document.getElementById('nomouse')) {
            document.getElementById('nomouse').remove();
        }

        x1 = e.clientX;
        y1 = e.clientY;

        document.onmouseup = closeDragElem;
        document.onmousemove = elementDrag;
    }

    elementDrag = e => {
        e.preventDefault();

        x0 = x1 - e.clientX;
        y0 = y1 - e.clientY;
        x1 = e.clientX;
        y1 = e.clientY;

        elem.style.top = (elem.offsetTop - y0) + "px";
        elem.style.left = (elem.offsetLeft - x0) + "px";

        const r = document.getElementById('rose').getBoundingClientRect();
        const n = document.getElementById('nose').getBoundingClientRect();

        const utter = (
                n.left < r.right
                && r.left < n.right
                && n.top < r.bottom
                && r.top < n.bottom
                )
                ? "Pleasant"
                : "Nonplussed";

        if(utteranceDone) {
            utteranceDone = false;
            const req = new SpeechSynthesisUtterance(utter);
            req.voice = synth.getVoices()[0];
            req.onend = () => utteranceDone = true;
            synth.speak(req);
        }
    }

    closeDragElem = () => {
        document.onmouseup = null;
        document.onmousemove = null;
    }
    elem.onmousedown = dragMouseDown
}
dragElement(document.getElementById('nose'));
</script></body></html>